<form>
	<div class="form-group">
    <app-symbol-search
        label="Search for securities using ticker or name"
        (tickerSelected)="onTickerSelected($event)"
        cssClass="form-control">
      </app-symbol-search>
	</div>
</form>

<div *ngIf="loaded">

  <div>
    <a class="btn btn-primary mr-1 mt-2" [routerLink]="[ '/stocks/transaction']">
      <i class="fas fa-dollar-sign"></i> Shares
    </a>
    <a class="btn btn-primary mr-1 mt-2" [routerLink]="[ '/options/sell']">
      <i class="fas fa-credit-card"></i> Options
    </a>
    <a class="btn btn-primary mr-1 mt-2" [routerLink]="[ '/transactions' ]" aria-label="stock lists">
      <i class="fas fa-sync"></i> Transactions
    </a>
    <a class="btn btn-primary mr-1 mt-2" [routerLink]="[ '/notes' ]" aria-label="notes">
      <i class="fas fa-feather"></i> Journal
    </a>
  </div>

  <h3 class="mt-4">Ownership</h3>

  <div *ngIf="openOptions.length > 0 || owned.length > 0">
    <table class="table table-hover border">
      <thead class="thead-light">
        <tr>
          <th width="50">Symbol</th>
          <th width="120">Latest Price</th>
          <th width="50">Amount</th>
          <th>Details</th>
          <th width="100">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let option of openOptions">
          <td><a [routerLink]="[ '/stocks', option.ticker ]">{{option.ticker}}</a></td>
          <td>{{option.currentPrice | currency}}</td>
          <td class="text-right">{{option.numberOfContracts}}</td>
          <td>
            {{option.boughtOrSold}}
            <b>{{option.strikePrice | currency}}</b>
            {{option.optionType}}
            expiring <b>{{option.expirationDate | date : 'shortDate'}}</b>

            <span *ngIf="option.expiresSoon" class="ml-1 badge badge-warning">expires soon</span>
            <span *ngIf="option.isExpired" class="ml-1 badge badge-danger">expired</span>
          </td>
          <td>
            <a [routerLink]="[ '/optiondetails', option.id ]">details</a>
          </td>
        </tr>
        <tr *ngFor="let ticker of owned">
          <td><a [routerLink]="[ '/stocks', ticker.ticker ]">{{ticker.ticker}}</a></td>
          <td>{{ticker.currentPrice | currency}}</td>
          <td class="text-right">{{ticker.owned}}</td>
          <td>Average cost of <b>{{ticker.averageCost | currency }}</b></td>
          <td>
            <a [routerLink]="[ '/stockdetails', ticker.id ]">details</a>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

  <div *ngIf="openOptions.length == 0 && owned.length == 0">
    <div class="alert alert-secondary">
      You haven't recorded any option/share transactions.
    </div>
  </div>

</div>

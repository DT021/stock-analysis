<form>
	<div class="form-group">
		<label for="ticker">Symbol</label>
		<input type="text" class="form-control"
      id="ticker"
      #tickerBox
      name="ticker"
      (input)="search(tickerBox.value)"
      (blur)="loseFocus()"
      autofocus
      autocomplete="off" />

      <div [ngClass]="{'border': resultCount > 0, 'rounded': resultCount > 0}" class="search-results">
        <div class="row" *ngFor="let r of searchResults$ | async" (click)="clicked(r.symbol)">
          <div class="col ml-2 mb-2">{{r.symbol}}</div>
          <div class="col-10">{{r.securityName}}</div>
        </div>
      </div>

		<small id="tickerHelp" class="form-text text-muted">Enter stock symbol</small>
	</div>
</form>

<div *ngIf="loaded">

  <div>
    <a class="btn btn-primary mr-1 mt-2" [routerLink]="[ '/stocks/transaction']">
      <i class="fas fa-dollar-sign"></i> Shares
    </a>
    <a class="btn btn-primary mr-1 mt-2" [routerLink]="[ '/options/sell']">
      <i class="fas fa-credit-card"></i> Options
    </a>
    <a class="btn btn-primary mr-1 mt-2" [routerLink]="[ '/transactions' ]" aria-label="stock lists">
      <i class="fas fa-sync"></i> Transactions
    </a>
    <a class="btn btn-primary mr-1 mt-2" [routerLink]="[ '/notes' ]" aria-label="notes">
      <i class="fas fa-feather"></i> Journal
    </a>
  </div>

  <h3 class="mt-4">Ownership</h3>

  <div *ngIf="openOptions.length > 0 || owned.length > 0">
    <div *ngFor="let option of openOptions" class="mb-1">
      <a [routerLink]="[ '/stocks', option.ticker ]">{{option.ticker}}</a> @ <b>{{option.strikePrice | currency}}</b>
      {{option.type}} expiring <b>{{option.expirationDate | date : 'shortDate'}}</b>
        (<a [routerLink]="[ '/optiondetails', option.id ]">details</a>)
    </div>
    <div *ngFor="let ticker of owned" class="mb-1">
      {{ticker.owned}} <i>shares</i> of <a [routerLink]="[ '/stocks', ticker.ticker ]">{{ticker.ticker}}</a>
    </div>
  </div>

  <div *ngIf="openOptions.length == 0 && owned.length == 0">
    <div class="alert alert-secondary">
      You haven't recorded any option/share transactions.
    </div>
  </div>

</div>
